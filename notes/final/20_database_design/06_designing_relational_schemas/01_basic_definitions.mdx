# Relációs adatbázis-sémák tervezése

Ahhoz, hogy megfelelő adatbázis sémákat tervezzünk szükséges pár, a sémák elemzéséhez elengedhetetlen definíció
bevezetése.

:::definition[Funkcionális függőség]
A **funkcionális függőség** egy $R$ reláción a következő formájú megszorítás: "Ha $R$ két sora megegyezik az
$A_1, A_2, \dots, A_n$ attribútumokon, akkor meg kell egyezniük a $B_1, B_2, \dots, B_n$ attribútumokon is."

Ekkor az mondjuk $A_1 A_2\dots A_n$ funkcionálisan meghatározza $B_1 B_2 \dots B_n$-t.

Jelölés: $A_1 A_2 \dots A_n \rightarrow B_1 B_2 \dots B_n$.
:::

A funkcionális elnevezés az angol function (függvény) szóból ered, mivel lényegében egy olyan függvény,
mely az $A_1, A_2, \dots, A_n$ attribútumokhoz a $B_1, B_2, \dots, B_n$ attribútumokat rendeli.

Azt mondjuk egy $R$ reláció kielégíti az $FD$ funkcionális függőséget, ha $R$ minden előfordulása esetén $FD$ teljesül.

A funkcionális függések **jobboldala szétvágható**, azaz $X \rightarrow A_1 A_2 \dots A_n$, akkor és csak akkor teljesül
az $R$ reláción, ha $X \rightarrow A_1, X \rightarrow A_2, \dots, X \rightarrow A_n$ is teljesül.

A baloldalak szétvágására nincs általános szabály.

:::example
A Filmek(filmcím, év, hossz, műfaj, stúdióNév, színésznév) reláció esetén funkcionális függőség lehet a
$\text{filmcím}, \text{év} \rightarrow \text{hossz}, \text{műfaj}, \text{stúdióNév}$ állítás, mely ekvivalens a

$$
\begin{align*}
\text{filmcím}, \text{év} &\rightarrow \text{hossz} \\
\text{filmcím}, \text{év} &\rightarrow \text{műfaj} \\
\text{filmcím}, \text{év} &\rightarrow \text{stúdióNév}
\end{align*}
$$
funkcionális függőségekkel.
:::

Bizonyos funkcionális függőségek különleges szerepet töltenek be.

:::definition[Kulcs]
$K$ **szuperkulcs** az $R$ relációra, ha $K$ funkcionálisan meghatározza $R$ minden attribútumát.

A $K$ szuperkulcsot **kulcsnak** nevezzük, ha egyetlen valódi részhalmaza sem szuperkulcs (azaz a lehető legszűkebb szuperkulcs).

:::

A séma tervezésekor fontos, hogy vizsgálni tudjuk a funkcionális függőségek közti kapcsolatokat. Egy $Y$ funkcionális
függőség levezethető az $X$ funkcionális függőségből, ha $X$ teljesülése esetén $Y$ is teljesül.

## Armstrong axiómák

A levezethetőség vizsgálatához segítséget adnak, az **Armstrong-axiómák**. Legyen $R$ egy reláció, $X,Y,Z$ pedig
funkcionális függőségek, ekkor teljesülnek a következő állítások:
1. Reflexivitás: ha $Y \subseteq X$, akkor $X \rightarrow Y$
2. Bővíthetőség: ha $X \rightarrow Y$, akkor $X,Z \rightarrow Y,Z$
3. Tranzitivitás: ha $X \rightarrow Y$ és $Y \rightarrow Z$, akkor $X \rightarrow Z$

:::example
Álljon az $R$ séma a $A$, $B$, $C$ és $D$ attribútumokból és legyen
$F = \left\lbrace A \rightarrow C, B \rightarrow D \right\rbrace$.
1. $A \rightarrow C$ adott
2. Bővíthetőség miatt: $AB \rightarrow CB$
3. $B \rightarrow D$ adott
4. Bővíthetőség miatt: $ABC \rightarrow ABCD$
:::
