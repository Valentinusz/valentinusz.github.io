"use strict";(self.webpackChunkvalentinusz_github_io=self.webpackChunkvalentinusz_github_io||[]).push([[6341],{8566:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"java/generic","title":"Generikusok","description":"Programoz\xe1s sor\xe1n sokszor el\u0151fordul, hogy egy oszt\xe1lyt (\xe1ltal\xe1ban egy adatszerkezetet) t\xf6bb k\xfcl\xf6nb\xf6z\u0151 t\xedpusra is defini\xe1lni szeretn\xe9nk. A dinamikus nyelvekben ez nem okoz gondot, probl\xe9ma n\xe9lk\xfcl tudunk a v\xe1ltoz\xf3knak b\xe1rmilyen t\xedpus\xfa \xe9rt\xe9ket adni. A Java statikus t\xedpusrendszer\xe9ben ezt azonban nem tudjuk megtenni.","source":"@site/notes/java/generic.md","sourceDirName":"java","slug":"/java/generic","permalink":"/notes/java/generic","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Valentinusz","lastUpdatedAt":1697492234000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"notesSidebar","previous":{"title":"Folyamok","permalink":"/notes/java/stream"},"next":{"title":"A rekord t\xedpus","permalink":"/notes/java/record"}}');var a=s(4848),r=s(8453);const l={sidebar_position:5},i="Generikusok",o={},d=[{value:"T\xedpust\xf6rl\xe9s",id:"t\xedpust\xf6rl\xe9s",level:2},{value:"Alt\xedpusoss\xe1g",id:"alt\xedpusoss\xe1g",level:2},{value:"T\xedpusparam\xe9ter megk\xf6t\xe9sek",id:"t\xedpusparam\xe9ter-megk\xf6t\xe9sek",level:2},{value:"<code>extends</code>",id:"extends",level:3},{value:"<code>super</code>",id:"super",level:3},{value:"PECS szab\xe1ly",id:"pecs-szab\xe1ly",level:3},{value:"Met\xf3dusok",id:"met\xf3dusok",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"generikusok",children:"Generikusok"})}),"\n",(0,a.jsx)(n.p,{children:"Programoz\xe1s sor\xe1n sokszor el\u0151fordul, hogy egy oszt\xe1lyt (\xe1ltal\xe1ban egy adatszerkezetet) t\xf6bb k\xfcl\xf6nb\xf6z\u0151 t\xedpusra is defini\xe1lni szeretn\xe9nk. A dinamikus nyelvekben ez nem okoz gondot, probl\xe9ma n\xe9lk\xfcl tudunk a v\xe1ltoz\xf3knak b\xe1rmilyen t\xedpus\xfa \xe9rt\xe9ket adni. A Java statikus t\xedpusrendszer\xe9ben ezt azonban nem tudjuk megtenni."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"class Pair { String s; char c }\nclass Pair { int i; boolean b }\n"})}),"\n",(0,a.jsx)(n.p,{children:"Ezt nem tehetj\xfck meg, mivel a Java megk\xf6veteli, hogy az oszt\xe1lynevek egyediek legyenek. De ha megtehetn\xe9nk se felt\xe9tlen lenne ez egy eleg\xe1ns megold\xe1s."}),"\n",(0,a.jsx)(n.p,{children:"Erre megold\xe1sul ker\xfcltek bevezet\xe9sre Java 5-ben a generikusok. Ezen nyelvi funkci\xf3 lehet\u0151v\xe9 teszi, hogy az oszt\xe1lyainkat \xe9s met\xf3dusainkat, egy konkr\xe9t t\xedpus n\xe9lk\xfcli absztrakci\xf3val defini\xe1ljuk."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"// t\xedpusparam\xe9terek\nclass Pair<T1, T2> {\n  T1 elem1;\n  T2 elem2;\n\n  T1 getElem1() {\n      return this.elem1;\n  }\n\n  public void setElem1(T1 elem1) {\n      this.elem1 = elem1;\n  }\n}\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsx)(n.p,{children:"A t\xedpusparam\xe9terek eset\xe9ben a k\xf6vetkez\u0151 konvenci\xf3kat \xe9rdemes k\xf6vetni:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"T"})," (type): \xe1ltal\xe1nos t\xedpusparam\xe9ter"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"E"})," (element): gy\u0171jtem\xe9ny elemt\xedpusa"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"K"})," \xe9s ",(0,a.jsx)(n.code,{children:"V"})," (key, value): kulcs \xe9rt\xe9k p\xe1rok"]}),"\n"]})]}),"\n",(0,a.jsx)(n.p,{children:"Miut\xe1n meg\xedrtuk egy generikus oszt\xe1lyt, a k\xf6vetkez\u0151 m\xf3don p\xe9ld\xe1nyos\xedthatjuk:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"Pair<String, Character> pair = new Pair<String, Character>();\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsx)(n.p,{children:"Java 7 \xf3ta a p\xe9ld\xe1nyos\xedt\xe1s jobb oldal\xe1r\xf3l elhagyhat\xf3ak a t\xedpusparam\xe9terek:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"Pair<String, Character> pair = new Pair<>();\n"})})]}),"\n",(0,a.jsx)(n.admonition,{type:"danger",children:(0,a.jsx)(n.p,{children:"T\xedpusparam\xe9terk\xe9nt csak referenciat\xedpusokat haszn\xe1lhatunk! Ez a korl\xe1toz\xe1s a generikusok implement\xe1ci\xf3j\xe1b\xf3l fakad, szemben m\xe1s nyelvekkel (p\xe9ld\xe1ul C++), a Java nem reifik\xe1ci\xf3t (sablon p\xe9ld\xe1nyos\xedt\xe1s \xfaj implement\xe1ci\xf3t hoz l\xe9tre, a megadott param\xe9terekkel), hanem t\xedpus t\xf6rl\xe9st haszn\xe1l."})}),"\n",(0,a.jsx)(n.h2,{id:"t\xedpust\xf6rl\xe9s",children:"T\xedpust\xf6rl\xe9s"}),"\n",(0,a.jsxs)(n.p,{children:["A ",(0,a.jsx)(n.strong,{children:"t\xedpus t\xf6rl\xe9s (type erasure)"})," sor\xe1n, a a megadott sablon param\xe9terek t\xf6rl\u0151dnek, hely\xfckre egy konkr\xe9t referenciat\xedpus ker\xfcl (p\xe9ld\xe1ul ",(0,a.jsx)(n.code,{children:"Object"}),", de n\xe9ha valami specifikusabb)."]}),"\n",(0,a.jsx)(n.p,{children:"Teh\xe1t az el\u0151bbi k\xf3dunkb\xf3l ford\xedt\xe1st k\xf6vet\u0151en valami ilyesmi lesz:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"class Pair {\n  Object elem1;\n  Object elem2;\n\n  Object getElem1() {\n      return this.elem1;\n  }\n\n  public void setElem1(Object elem1) {\n      this.elem1 = elem1;\n  }\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"A sablonunk haszn\xe1lata meg valami ilyesmire fog fordulni:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'Pair pair = new Pair();\npair.setElem1("abc");\n// t\xedpusk\xe9nyszer\xedt\xe9sek automatikusan beker\xfclnek a k\xf3dba\nString s = (String) pair.getElem1(); \n'})}),"\n",(0,a.jsx)(n.p,{children:"Egy\xe9bk\xe9nt kompatibilit\xe1si okokb\xf3l tudunk ilyet is csin\xe1lni:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"Map nameToBook = new HashMap();\n"})}),"\n",(0,a.jsx)(n.p,{children:"Ez az \xfagynevezett nyers t\xedpus (raw type), haszn\xe1lata ker\xfclend\u0151 \xe9s erre a ford\xedt\xf3program is figyelmeztet."}),"\n",(0,a.jsx)(n.h2,{id:"alt\xedpusoss\xe1g",children:"Alt\xedpusoss\xe1g"}),"\n",(0,a.jsx)(n.admonition,{type:"danger",children:(0,a.jsxs)(n.p,{children:["Legyenek ",(0,a.jsx)(n.code,{children:"A"}),", ",(0,a.jsx)(n.code,{children:"B"})," t\xedpusok, ",(0,a.jsx)(n.code,{children:"C"})," egy generikus t\xedpus, \xe9s legyen ",(0,a.jsx)(n.code,{children:"B"})," alt\xedpusa ",(0,a.jsx)(n.code,{children:"A"}),"-nak, ekkor ",(0,a.jsx)(n.code,{children:"C<B>"})," nem alt\xedpusa ",(0,a.jsx)(n.code,{children:"C<A>"}),"-nak!\nP\xe9ld\xe1ul ",(0,a.jsx)(n.code,{children:"List<Integer>"})," nem alt\xedpusa ",(0,a.jsx)(n.code,{children:"List<Object>"}),"-nek!"]})}),"\n",(0,a.jsx)(n.p,{children:"Ha ez nem \xedgy lenne, akkor a k\xf6vetkez\u0151 \xe9rtelmetlen k\xf3d m\u0171k\xf6dne:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"List<Integer> ints = new ArrayList<>();\nList<Object> objs = ints;\nobjs.add(new Object());\nInteger value = ints.get(0); // integernek k\xe9ne lennie de \xedgy b\xe1rmi lehet\n"})}),"\n",(0,a.jsx)(n.p,{children:"T\xf6mb\xf6k nem sablonokkal vannak implement\xe1lva, ez\xe9rt kicsit m\xe1shogy m\u0171k\xf6dnek:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"Integer[] ints = new Integer[5];\nObject[] objs = ints;\nobjs[0] = new Integer(4);\nobjs[1] = new Object(); // fut\xe1si idej\u0171 hiba (ArrayStoreException)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"t\xedpusparam\xe9ter-megk\xf6t\xe9sek",children:"T\xedpusparam\xe9ter megk\xf6t\xe9sek"}),"\n",(0,a.jsxs)(n.p,{children:["A t\xedpusparam\xe9terekre megk\xf6t\xe9seket tehet\xfcnk (",(0,a.jsx)(n.strong,{children:"bounded type parameter"}),")."]}),"\n",(0,a.jsx)(n.h3,{id:"extends",children:(0,a.jsx)(n.code,{children:"extends"})}),"\n",(0,a.jsxs)(n.p,{children:["Azt ellen\u0151rzi, hogy a ",(0,a.jsx)(n.code,{children:"T"})," t\xedpus lesz\xe1rmazottja-e a megadott t\xedpusnak."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'class FooPrinter<T extends PrintWriter> {\n    T writer;\n\n    public FooPrinter(T writer) {\n        this.writer = writer;\n    }\n    \n    void print(String s) {\n        writer.println(s + "foo");\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"FooPrinter<Integer> foo = new FooPrinter<>(...); //ford\xedt\xe1si hiba\nFooPrinter<PrintWriter> foo = new FooPrinter<>(new PrintWriter(...));\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Ekkor \xe9rtelemszer\u0171en a t\xedpust\xf6rl\xe9s sor\xe1n ",(0,a.jsx)(n.code,{children:"Object"})," helyett ",(0,a.jsx)(n.code,{children:"PrintWriter"})," ker\xfcl a t\xedpusparam\xe9ter hely\xe9re."]}),"\n",(0,a.jsx)(n.p,{children:"Lehet\u0151s\xe9g van bonyolultabb korl\xe1toz\xe1sok megad\xe1s\xe1ra is:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"// T lesz\xe1rmazottja Exception-nek \xe9s\n// megval\xf3s\xedtja az Cloneable \xe9s Collection<Integer> interf\xe9szeket\nclass Foo<T extends Exception & Cloneable & Collection<Integer>> { ... }\n"})}),"\n",(0,a.jsx)(n.p,{children:"A t\xedpusparam\xe9tereknek is lehetnek t\xedpusparam\xe9terei:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"class Foo<T, Cmp extends Comparator<T>> { ... }\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"danger",children:(0,a.jsx)(n.p,{children:"A t\xedpusparam\xe9terek egym\xe1st\xf3l f\xfcgg\xe9se nem alkothat k\xf6rt!"})}),"\n",(0,a.jsxs)(n.p,{children:["A ",(0,a.jsx)(n.code,{children:"?"})," (wildcard) karakterrel jel\xf6lhet\xfcnk tetsz\u0151leges t\xedpust."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"void f(List<?> list) { ... }\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Term\xe9szetesen ezt lehet kombin\xe1lni az kor\xe1bban l\xe1tott ",(0,a.jsx)(n.code,{children:"extend"}),"-el, interf\xe9sz megval\xf3s\xedt\xe1ssal viszont nem."]}),"\n",(0,a.jsx)(n.h3,{id:"super",children:(0,a.jsx)(n.code,{children:"super"})}),"\n",(0,a.jsxs)(n.p,{children:["Azt ellen\u0151rzi, hogy a ",(0,a.jsx)(n.code,{children:"T"})," t\xedpus sz\xfcl\u0151je-e az adott t\xedpusnak."]}),"\n",(0,a.jsx)(n.h3,{id:"pecs-szab\xe1ly",children:"PECS szab\xe1ly"}),"\n",(0,a.jsxs)(n.p,{children:['"Producer extends, consumer super". Ha gy\u0171jtem\xe9nyn\xe9l t\xedpusparam\xe9ter-megk\xf6t\xe9st haszn\xe1lunk. P\xe9ld\xe1ul ha egy lista elemit akarjuk el\xe9rni, akkor a lista a gy\xe1rt\xf3, teh\xe1t ',(0,a.jsx)(n.code,{children:"List<? extends T>"}),", ha hozz\xe1adni akarunk akkor mi vagyunk a gy\xe1rt\xf3 teh\xe1t ",(0,a.jsx)(n.code,{children:"List<? super T>"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"<T> List<? super Comparable<T>> f(List<? extends Comparable<T>> param) {\n  List<? super Comparable<T> retval = new ArrayList<>();\n  for (var elem : param) {\n    retval.add(elem);\n  }\n  return retval;\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"met\xf3dusok",children:"Met\xf3dusok"}),"\n",(0,a.jsx)(n.p,{children:"A met\xf3dusoknak tudunk saj\xe1t t\xedpusparam\xe9tert adni, egy kicsit fura szintaxissal."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"static <T> boolean noSameObjs(List<T> elems) {...}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Megh\xedv\xe1s:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"System.out.println(C.<String>noSameObjs(texts));\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var t=s(6540);const a={},r=t.createContext(a);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);